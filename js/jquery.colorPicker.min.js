/**
 * Really Simple Color Picker in jQuery
 *
 * Licensed under the MIT (MIT-LICENSE.txt) licenses.
 *
 * Copyright (c) 2008-2012
 * Lakshan Perera (www.laktek.com) & Daniel Lacy (daniellacy.com)
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 */!function(a){var b,c,d,e=0,f={control:a('<div class="colorPicker-picker">&nbsp;</div>'),palette:a('<div id="colorPicker_palette" class="colorPicker-palette" />'),swatch:a('<div class="colorPicker-swatch">&nbsp;</div>'),hexLabel:a('<label for="colorPicker_hex">Hex</label>'),hexField:a('<input type="text" id="colorPicker_hex" />')},g="transparent";a.fn.colorPicker=function(b){return this.each(function(){var c,d,h=a(this),i=a.extend({},a.fn.colorPicker.defaults,b),j=a.fn.colorPicker.toHex(h.val().length>0?h.val():i.pickerDefault),k=f.control.clone(),l=f.palette.clone().attr("id","colorPicker_palette-"+e),m=f.hexLabel.clone(),n=f.hexField.clone(),o=l[0].id;if(a.each(i.colors,function(b){c=f.swatch.clone(),i.colors[b]===g?(c.addClass(g).text("X"),a.fn.colorPicker.bindPalette(n,c,g)):(c.css("background-color","#"+this),a.fn.colorPicker.bindPalette(n,c)),c.appendTo(l)}),m.attr("for","colorPicker_hex-"+e),n.attr({id:"colorPicker_hex-"+e,value:j}),n.bind("keydown",function(b){if(13===b.keyCode){var c=a.fn.colorPicker.toHex(a(this).val());a.fn.colorPicker.changeColor(c?c:h.val())}27===b.keyCode&&a.fn.colorPicker.hidePalette()}),n.bind("blur",function(b){var c=a.fn.colorPicker.toHex(a(this).val());a.fn.colorPicker.changeColor(c?c:h.val())}),n.bind("keyup",function(b){var c=a.fn.colorPicker.toHex(a(b.target).val());a.fn.colorPicker.previewColor(c?c:h.val())}),a('<div class="colorPicker_hexWrap" />').append(m).appendTo(l),l.find(".colorPicker_hexWrap").append(n),i.showHexField===!1&&(n.hide(),m.hide()),a("body").append(l),l.hide(),k.css("background-color",j),k.bind("click",function(){h.is(":not(:disabled)")&&a.fn.colorPicker.togglePalette(a("#"+o),a(this))}),b&&b.onColorChange?k.data("onColorChange",b.onColorChange):k.data("onColorChange",function(){}),(d=h.data("text"))&&k.html(d),h.after(k),h.bind("change",function(){h.next(".colorPicker-picker").css("background-color",a.fn.colorPicker.toHex(a(this).val()))}),h.val(j),"input"===h[0].tagName.toLowerCase())try{h.attr("type","hidden")}catch(p){h.css("visibility","hidden").css("position","absolute")}else h.hide();e++})},a.extend(!0,a.fn.colorPicker,{toHex:function(a){if(a.match(/[0-9A-F]{6}|[0-9A-F]{3}$/i))return"#"===a.charAt(0)?a:"#"+a;if(!a.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/))return!1;var b=[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10)],c=function(a){if(a.length<2)for(var b=0,c=2-a.length;c>b;b++)a="0"+a;return a};if(3===b.length){var d=c(b[0].toString(16)),e=c(b[1].toString(16)),f=c(b[2].toString(16));return"#"+d+e+f}},checkMouse:function(d,e){var f=c,g=a(d.target).parents("#"+f.attr("id")).length;d.target===a(f)[0]||d.target===b[0]||g>0||a.fn.colorPicker.hidePalette()},hidePalette:function(){a(document).unbind("mousedown",a.fn.colorPicker.checkMouse),a(".colorPicker-palette").hide()},showPalette:function(c){var d=b.prev("input").val();c.css({top:b.offset().top+b.outerHeight(),left:b.offset().left}),a("#color_value").val(d),c.show(),a(document).bind("mousedown",a.fn.colorPicker.checkMouse)},togglePalette:function(d,e){e&&(b=e),c=d,c.is(":visible")?a.fn.colorPicker.hidePalette():a.fn.colorPicker.showPalette(d)},changeColor:function(c){b.css("background-color",c),b.prev("input").val(c).change(),a.fn.colorPicker.hidePalette(),b.data("onColorChange").call(b,a(b).prev("input").attr("id"),c)},previewColor:function(a){b.css("background-color",a)},bindPalette:function(c,e,f){f=f?f:a.fn.colorPicker.toHex(e.css("background-color")),e.bind({click:function(b){d=f,a.fn.colorPicker.changeColor(f)},mouseover:function(b){d=c.val(),a(this).css("border-color","#598FEF"),c.val(f),a.fn.colorPicker.previewColor(f)},mouseout:function(e){a(this).css("border-color","#000"),c.val(b.css("background-color")),c.val(d),a.fn.colorPicker.previewColor(d)}})}}),a.fn.colorPicker.defaults={pickerDefault:"FFFFFF",colors:["000000","993300","333300","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","999999","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFFF","99CCFF","FFFFFF"],addColors:[],showHexField:!0}}(jQuery);
